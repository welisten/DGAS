import{Game}from"./Game.js";import{gameData}from"../../Constants/gameData.js";import{generalImgDtArr,animalsImgDtArr}from"../../Constants/ImagesData.js";import{audioDataArr}from"../../Constants/songsData.js";import{colors}from"../../Constants/Colors.js";let store;class Preloader{constructor(){this.intro=null,this.phaserGame=null,this.assetsControls={},this.setPreloader(),document.title="PÃ¡gina de carregamento",gameData.isDarkMode||(document.body.style.backgroundColor=`${colors.bg_light}`)}setPreloader(){const e=`${window.screen.width>2e3?.4*window.screen.width:window.screen.width>1500?.65*window.screen.width:.6*window.screen.width}px`,t=.613*window.screen.height,o=document.querySelector("#loading");o.style.width=e,o.style.height=t;const r={type:Phaser.AUTO,width:e,height:t,parent:o,transparent:!0,scene:{preload:this.preload}};this.phaserGame=new Phaser.Game(r)}preload(){let e;const t=this.sys.game.canvas;e=window.screen.width>2e3?.4*window.screen.width:window.screen.width>1500?.65*window.screen.width:.6*window.screen.width;const o=e,r=.613*window.screen.height;t.id="jogo4_canvas",t.style.border=`10px solid ${colors.green_border}`,t.style.borderRadius="20px",window.gameAssets={},store=window.gameAssets;const a=this.add.graphics(),s=this.add.graphics(),n=document.querySelector("#loading");n.classList.toggle("active"),s.fillStyle("0xffffff",1),s.fillRoundedRect((o-.8*o)/2,.479*r,.8*o,20,5),s.lineStyle(5,"0xffffff",1),s.strokeRoundedRect((o-.8*o)/2,.479*r,.8*o,20,5),s.setDepth(9),a.setDepth(10);const i=e=>this.textures.get(e).getSourceImage(),l=e=>this.cache.audio.get(e),d=document.querySelector(".frog");function c(e,t,o){e[t]=o}this.load.on("progress",(e=>{d.style.left;a.clear(),a.fillStyle(11267391,1),a.fillRoundedRect((o-.81*o)/2+.01*o,.479*r+3.5,.79*o*e,14,2),d.style.left=`calc(11% + ${77*e}%)`})),this.load.on("filecomplete",(e=>{console.log(`O arquivo "${e}" foi carregado`)})),this.load.on("complete",(()=>{let e;audioDataArr.forEach((e=>c(store,e.name,l(e.name))));for(let e of generalImgDtArr)c(store,e.name,i(e.name));for(let e of animalsImgDtArr)c(store,e.name,i(e.name));e=document.querySelector(".textToReader"),e.textContent="carregamento concluido",this.time.delayedCall(1e3,(()=>{a.destroy(),s.destroy(),n.classList.toggle("active"),n.remove(),t.remove(),gameData.mainScene="Game",console.clear(),gameData.app=new Game}))}));for(let e of generalImgDtArr)this.load.image(e.name,e.src);for(let e of animalsImgDtArr)this.load.image(e.name,e.src);audioDataArr.forEach((e=>{this.load.audio(e.name,e.src)}))}getIntro(){this.intro?console.log("Starting the game with intro:",this.intro):console.log("Intro is not initialized yet")}}export{Preloader};