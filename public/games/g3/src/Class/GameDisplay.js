import{generalImagesDataArr}from"../Consts/Values.js";import{gameData}from"../Consts/gameData.js";import{createElement}from"../js/utils/createElements.js";class GameDisplay{constructor(e){this.father=e,this.element=document.getElementById("gameDisplay"),this.user="",this.LibrasBtn=document.querySelector(".libras_btn"),this.LightBtn=document.querySelector(".lightMode_btn"),this.header=new DisplayHeader(this.element),this.bar=new DisplayBar(this.element,this),this.body=new DisplayBody(this.element),this.footer=new DisplayFooter(this.element),this.initDisplay()}initDisplay(){this.father.appendChild(this.element),Array.from([this.header,this.bar,this.body]).forEach(((e,t)=>{const s=document.createElement("div");s.classList.add("line"),s.style.display="absolute",e.element.appendChild(s)})),this.setupLibrasBtn()}setupLibrasBtn(){this.LibrasBtn?.addEventListener("click",(e=>{e.preventDefault(),this.toggleDisplayLines()}))}handleWin(){Array.from([this.header,this.body,this.footer]).forEach((e=>e.handleWin()))}resetDisplay(){[this.header,this.bar,this.body,this.footer].forEach((e=>e.reset()))}toggleDisplay(){this.LibrasBtn.classList.contains("active")?(this.element.style.height="33%",setTimeout((()=>{this.element.style.margin="12% 0 0 "}),50)):(this.header.element.style.transition="none",setTimeout((()=>{this.element.style.height="100%",this.element.style.margin="0"}),1e3)),Array.from([this.body,this.bar,this.footer]).forEach((e=>e.toggleDisplay())),this.toggleDisplayLines()}toggleLight(){const e=this.LightBtn.classList.contains("active");this.element.style.backgroundColor=e?"#ffffff10":"#ffffff",this.element.style.border=e?"1px solid #3498db":"3px solid #3498db",document.querySelectorAll(".line").forEach((e=>{e.style.borderBottom="1px solid #ffffff80"})),Array.from([this.header,this.bar,this.body,this.footer]).forEach((t=>{e?t.darkMode():t.lightMode()}))}toggleDisplayLines(){const e=document.querySelectorAll(".line"),t=this.LibrasBtn.classList.contains("active");setTimeout((()=>{e.forEach((e=>{e.style.display=t?"none":"block"}))}),t?10:1e3)}update(){this.header.updateClockContainer(),this.header.updateInfoContainer()}onMemoryGameConstruction(e){this.user=e,this.bar.setBarName(this.user.name.split(" ")[0]),this.bar.updateBar()}}class DisplayHeader{constructor(e){this.father=e,this.element=document.createElement("div"),this.timer=0,this.counter=null,this.isCounterPaused=null,this.cardInfo=[],this.createDisplayHeader()}createDisplayHeader(){this.element.id="gameDisplay_header",this.element.className="gameDisplay_header",this.clockContainer=createElement("div","clock"),this.clockContainer.innerHTML='<p>--</p><i class = "fa-regular fa-clock"></i>';const e=createElement("div","info","info"),t=createElement("div","cardName"),s=createElement("div","cardLocation"),i=Math.floor(.5*window.innerWidth)>760?760:Math.floor(.4*window.innerWidth);this.element.style.height=.25*i+"px",this.clockContainer.style.height=.21*i+"px",this.clockContainer.style.width=.19*i+"px",e.style.height=.23*i+"px",e.append(t,s),this.element.append(this.clockContainer,e),this.father.appendChild(this.element),e.style.fontWeight="200",this.cardInfo[0]="Precione Iniciar para começar.",this.cardInfo[1]="<3",this.clockContainer.addEventListener("click",(()=>{gameData.isLibrasActive&&gameData.intro.gameAcessibleDisplay.readWithAccessibility("tempo do relógio")})),this.updateInfoContainer()}updateClockContainer(){if("--"===this.timer)this.clockContainer.innerHTML='<p class="clockNumber">--</p><i class = "fa-regular fa-clock"></i>';else{const e=this.timer<=9?`0${this.timer}`:this.timer;this.clockContainer.innerHTML=`<div class="clockNumber">${e}</div><span class= clockSecond>s</span><i class = "fa-regular fa-clock"></i>`}}updateInfoContainer(){this.element.querySelector(".cardName").textContent=this.cardInfo[0],this.element.querySelector(".cardLocation").textContent=this.cardInfo[1]}startClock(){this.counter=setInterval((()=>{"number"!=typeof this.timer&&(this.timer=0),this.timer++,this.updateClockContainer()}),1e3),this.isCounterPaused=!1}pauseClock(){this.counter&&(this.stopClock(),this.counter=null,this.isCounterPaused=!0)}resumeClock(){this.isCounterPaused&&this.startClock()}stopClock(){clearInterval(this.counter)}setCardsInfo(e,t){this.cardInfo=[e,t]}getTimer(){return this.timer}handleWin(){this.stopClock(),this.setCardsInfo("Voce Conseguiu","<3"),this.timer="--",this.updateInfoContainer(),this.updateClockContainer()}reset(){this.stopClock(),this.setCardsInfo("",""),this.timer="--",this.updateInfoContainer(),this.updateClockContainer()}darkMode(){const e=this.element.children[1];e.style.fontWeight="200",e.style.color="#efefef",this.clockContainer.style.border="2px solid #ffffff56",this.clockContainer.style.backgroundColor="var(--body-color-dark)"}lightMode(){const e=this.element.children[1];e.style.fontWeight="400",e.style.color="#3e3e3f",this.clockContainer.style.border="2px solid #056db3",this.clockContainer.style.backgroundColor="#3498db"}}class DisplayBar{constructor(e,t){this.father=e,this.game=t,this.element=null,this.LibrasBtn=document.querySelector(".libras_btn"),this.createDisplayBar()}createDisplayBar(){this.element=createElement("div","gameDisplay_bar","gameDisplay_bar"),this.element.style.display="flex";const e=createElement("div","userName");e.classList.add(),e.innerText=this.game.user.name||"--";const t=createElement("div","userLevel");t.innerText=`level ${this.game.user.level||0}`;const s=createElement("img","treasure","",{src:"https://res.cloudinary.com/dqzwqdc0a/image/upload/v1743020777/DGAS-Plataforma/game3/general/roy5gguau9x7utyszcyb.png",alt:"tesouros coletados",title:"tesouros coletados"}),i=createElement("span","treasuresNumber");i.innerText=this.game.user.treasures||0;const a=createElement("div","userTreasure");a.append(i,s),this.element.append(e,a,t),this.father.appendChild(this.element)}updateBar(){document.querySelector(".treasuresNumber").textContent=this.game.user.treasures,document.querySelector(".userLevel").textContent=`level ${this.game.user.level}`}reset(){this.setBarName("--"),this.setBarLevel("--"),document.querySelector(".treasuresNumber").textContent="-"}setBarLevel(e){const t="--"===e?"--":`level ${e}`;document.querySelector(".userLevel").textContent=t}setBarName(e){document.querySelector(".userName").textContent=e.toString()}toggleDisplay(){const e=this.LibrasBtn.classList.contains("active");setTimeout((()=>{this.element.style.display=gameData.isLibrasActive?"none":"flex"}),e?10:1500)}darkMode(){Object.assign(this.element.style,{fontWeight:"200",color:"#efefef"})}lightMode(){Object.assign(this.element.style,{fontWeight:"400",color:"#3e3e3f"})}}class DisplayBody{constructor(e){this.father=e,this.element="",this.LibrasBtn=document.querySelector(".libras_btn"),this.img="",this.imgContainer="",this.createDisplayBody()}createDisplayBody(){this.element=createElement("div","gameDisplay_body","gameDisplay_body"),this.element.style.display="flex",this.imgContainer=createElement("div","bodyImg_Container"),this.img=createElement("img","bodyImg"),this.father.appendChild(this.element),this.element.appendChild(this.imgContainer),this.imgContainer.appendChild(this.img)}updateDisplayImg(e,t="",s=""){"none"==this.img.style.display&&(this.img.style.display="block"),this.img.src=e,this.img.alt=t,this.img.title=s}handleWin(){const e=generalImagesDataArr.find((e=>"trophy"===e.name));e&&this.updateDisplayImg(e.src,e.description,"troféu")}reset(){this.img.style.display="none"}toggleDisplay(){const e=this.LibrasBtn.classList.contains("active");setTimeout((()=>{this.element.style.display=e?"none":"flex"}),e?10:1500)}darkMode(){this.element.style.color="#efefef",this.imgContainer.style.border="2px solid #ffffff56",this.imgContainer.style.backgroundColor="var(--body-color-dark)"}lightMode(){this.element.style.color="#3e3e3f",this.imgContainer.style.border="2px solid #056db3",this.imgContainer.style.backgroundColor="#3498db80"}}class DisplayFooter{constructor(e){this.father=e,this.element=null,this.paragraf=null,this.LibrasBtn=document.querySelector(".libras_btn"),this.footerText="Desenvolvido por Wesley Welisten",this.generateFooter(),this.updateFooterText(this.footerText)}generateFooter(){this.element=createElement("div","gameDisplay_footer","gameDisplay_footer"),this.element.style.display="block",this.paragraf=createElement("p","description FIT"),this.element.appendChild(this.paragraf),this.father.appendChild(this.element)}updateFooterText(e,t=()=>{}){this.footerText=e.toString(),this.paragraf.innerHTML=this.footerText,t(".description")}handleWin(){this.element.firstChild.style.fontSize="2rem",this.updateFooterText("<p>Obrigado por Jogar !</p><br><p>Desenvolvido por Wesley Welisten</p>")}reset(){this.footerText="",this.element.firstChild.textContent=this.footerText}toggleDisplay(){const e=this.LibrasBtn.classList.contains("active");setTimeout((()=>{this.element.style.display=e?"none":"block"}),e?10:1500)}darkMode(){this.element.style.fontWeight="200",this.element.style.color="#efefef"}lightMode(){this.element.style.fontWeight="400",this.element.style.color="#3e3e3f"}}export{GameDisplay};