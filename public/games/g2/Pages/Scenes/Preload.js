import{App}from"./Game.js";import{gameData}from"../../Constants/gameData.js";import{generalImgDtArr,handsImgDtArr,lettersImgDtArr,wordsImgDtArr,vocabularyImgDtArr}from"../../Constants/ImagesData.js";import{audioDataArr}from"../../Constants/songsData.js";import{colors}from"../../Constants/Colors.js";let store;class Preloader{constructor(){this.intro=null,this.phaserGame=null,this.assetsControls={},this.setPreloader(),document.title="Carregando...",gameData.isDarkMode||(document.body.style.backgroundColor=`${colors.bg_light}`)}setPreloader(){let e=window.innerWidth>2e3?.4*window.innerWidth:window.innerWidth>1500?.65*window.innerWidth:.55*window.innerWidth;const t=Math.floor(e),r=.7*window.innerHeight,o=document.querySelector("#logoContainer"),a={type:Phaser.AUTO,width:t,height:r,parent:o,scene:{preload:this.preload}};this.phaserGame=new Phaser.Game(a)}preload(){const e=this.sys.game.canvas;e.id="jogo3_canvas",e.style.border=`10px solid ${colors.letter_c2}`,e.style.borderRadius="20px",window.gameAssets={},store=window.gameAssets;let t=window.innerWidth>2e3?.4*window.innerWidth:window.innerWidth>1500?.65*window.innerWidth:.55*window.innerWidth;const r=Math.floor(t),o=.7*window.innerHeight,a=this.add.graphics(),s=this.add.graphics(),n=document.querySelector(".logo");n.classList.toggle("active"),s.fillStyle("0xfdfdfd",1),s.fillRoundedRect((r-.8*r)/2,.85*o,.8*r,20,15),s.lineStyle(5,"0xfdfdfd",1),s.strokeRoundedRect((r-.8*r)/2,.85*o,.8*r,20,15),s.setDepth(1),a.setDepth(2);const i=this.make.text({x:r/2,y:.8*o,text:"Carregando...",style:{font:"30px monospace",fill:"#ffffff"}});i.setOrigin(.5,.5);const l=e=>this.textures.get(e).getSourceImage(),d=e=>this.cache.audio.get(e);function m(e,t,r){e[t]=r}this.load.on("progress",(e=>{a.clear(),a.fillStyle(15916292,1),a.fillRoundedRect((r-.8*r)/2+.01*r,.85*o+3.5,.78*r*e,14,7)})),this.load.on("filecomplete",(e=>{console.log(`O arquivo "${e}" foi carregado`)})),this.load.on("complete",(()=>{audioDataArr.forEach((e=>m(store,e.name,d(e.name))));for(let e of generalImgDtArr)m(store,e.name,l(e.name));for(let e of wordsImgDtArr)m(store,e.name,l(e.name));for(let e of vocabularyImgDtArr)m(store,e.name,l(e.name));for(let e=0;e<lettersImgDtArr.length;e++)m(store,lettersImgDtArr[e].name,l(lettersImgDtArr[e].name)),m(store,handsImgDtArr[e].name,l(handsImgDtArr[e].name));this.time.delayedCall(1e3,(()=>{a.destroy(),s.destroy(),i.destroy(),n.classList.toggle("active"),n.parentNode.remove(),e.remove(),gameData.mainClass="App",console.clear(),gameData.app=new App}))}));for(let e of generalImgDtArr)this.load.image(e.name,e.src);for(let e of wordsImgDtArr)this.load.image(e.name,e.src);for(let e of vocabularyImgDtArr)this.load.image(e.name,e.src);for(let e=0;e<lettersImgDtArr.length;e++)this.load.image(lettersImgDtArr[e].name,lettersImgDtArr[e].src),this.load.image(handsImgDtArr[e].name,handsImgDtArr[e].src);audioDataArr.forEach((e=>{this.load.audio(e.name,e.src)}))}getIntro(){this.intro?console.log("Starting the game with intro:",this.intro):console.log("Intro is not initialized yet")}}export{Preloader};