import{gameData}from"../../Constants/gameData.js";import{colors}from"../../Constants/Colors.js";import{Alphabet}from"./Alphabet.js";import{Words}from"./Words.js";import{Explore}from"./Explore.js";class App{constructor(){this.element=document.querySelector("#game_Container"),this.element.classList.add("hm"),this.currentAudio={config:{startTime:0,pausedAt:0}},this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioContext.createGain(),document.title="Vamos Librar !",gameData.mainScene="Game",gameData.isMute||this.gainNode.gain.value,this.setSettingsControllers(),this.start()}setSettingsControllers(){const e=document.querySelector("#muteBtn"),t=document.querySelector("#lightBtn");!function(){gameData.isMute?e.children[0].setAttribute("class","fa-solid fa-volume-xmark"):e.children[0].setAttribute("class","fa-solid fa-volume-high");gameData.isDarkMode?t.children[0].setAttribute("class","fa-regular fa-sun"):t.children[0].setAttribute("class","fa-regular fa-moon")}(),e.addEventListener("click",(()=>{this.toggleVolume()})),t.addEventListener("click",(()=>{this.toggleLightMode()}))}start(){this.buildContainer(),this.setContainersElms(),this.playAudio(gameAssets.positiveBlipEffect),setTimeout((()=>{this.playAudio(gameAssets.theme1,.5,!0),gameData.isClickable=!0}),1e3)}buildContainer(){let e,t,i;this.element.classList.remove("inactive"),e=window.innerWidth>2e3?.5*window.innerWidth:window.innerWidth>1500?.65*window.innerWidth:.6*window.innerWidth,t=Math.floor(e),i=.7*window.innerHeight,this.element.style.width=`${t}px`,this.element.style.height=`${i}px`;const s=(e,t=void 0,i=void 0,s=void 0)=>{const n=document.createElement(e);if(t){let e=t.split(" ");for(let t=0;t<e.length;t++)n.classList.add(e[t])}return i&&n.setAttribute("id",i),s&&n.setAttribute("src",s),n},n=this.element,a=s("div","hm-c container top"),o=s("div","hm-logo"),r=s("img","lg-earth",void 0,"../Assets/imgs/general/earth.png"),d=s("img","lg-clouds cl-1",void 0,"../Assets/imgs/general/clouds_gif.gif"),l=s("img","lg-clouds cl-2",void 0,"../Assets/imgs/general/clouds_gif.gif"),c=s("div","hm-title"),m=s("img","title",void 0,"../Assets/imgs/general/title.png");r.setAttribute("alt","crianças dando as mãos envolta do globo terrestre"),d.setAttribute("alt","nuvens se mechendo"),l.setAttribute("alt","nuvens se mechendo"),m.setAttribute("alt","titulo: vamos librar"),o.appendChild(r),o.appendChild(d),o.appendChild(l),c.appendChild(m),a.appendChild(o),a.appendChild(c),n.appendChild(a);const u=s("div","hm-c container bottom"),g=s("div","hm-menu container"),h=s("button","btn hm-btn","hm-lettersBtn"),p=s("button","btn hm-btn","hm-wordsBtn"),b=s("button","btn hm-btn","hm-exploreBtn");h.innerHTML="alfabeto",p.innerHTML="palavras",b.innerHTML="explorar";const A=s("img","hand h-1",void 0,"../Assets/imgs/general/hand.png"),f=s("div","wrapper"),C=s("img","hand h-2",void 0,"../Assets/imgs/general/hand.png");A.setAttribute("alt",'mão referenciando a obra "A criação de Adão.'),C.setAttribute("alt",'mão referenciando a obra "A criação de Adão.'),g.appendChild(h),g.appendChild(p),g.appendChild(b),f.appendChild(C),u.appendChild(g),u.appendChild(A),u.appendChild(f),n.appendChild(u);const v=s("div","bg");n.appendChild(v)}setContainersElms(){const e=document.getElementById("hm-lettersBtn"),t=document.getElementById("hm-wordsBtn"),i=document.getElementById("hm-exploreBtn");e.addEventListener("click",(e=>{gameData.isClickable&&(this.stopCurrentAudio(),new Alphabet(this))})),t.addEventListener("click",(e=>{gameData.isClickable&&(this.stopCurrentAudio(),new Words(this))})),i.addEventListener("click",(e=>{gameData.isClickable&&(this.stopCurrentAudio(),new Explore(this))})),this.setBtns()}playAudio(e,t=1,i=!1){const s=this.audioContext.createBufferSource();s.buffer=e,s.loop=i,t=!0===gameData.isMute?0:1,this.gainNode.gain.value=t,s.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),!0!==i?s.start():(s.start(0,this.currentAudio.config.startTime),this.currentAudio.audio=s)}stopCurrentAudio(){this.currentAudio.audio&&(this.currentAudio.config.startTime=this.audioContext.currentTime,this.currentAudio.audio.stop(),this.currentAudio.audio=null)}toggleLightMode(){let e=document.getElementById("lightBtn");gameData.isDarkMode?document.body.style.background="#ddd":document.body.style.background=`${colors.bg_dark}`,e.children[0].classList.toggle("fa-sun"),e.children[0].classList.toggle("fa-moon"),gameData.isDarkMode=!gameData.isDarkMode}toggleVolume(){1==this.gainNode.gain.value?this.gainNode.gain.value=0:this.gainNode.gain.value=1,muteBtn.children[0].classList.toggle("fa-volume-xmark"),muteBtn.children[0].classList.toggle("fa-volume-high"),gameData.isMute=!gameData.isMute}resetContainerToNewScene(e=""){const t=document.querySelector(".access");this.element.innerHTML=" ",this.element.appendChild(t),this.element.className=e}getImage(e){return gameAssets[e]}setBtns(e=document){let t=e.querySelectorAll(".btn"),i=!1;t.forEach((t=>{t.addEventListener("mouseenter",(()=>{i||(i=!i,e===document&&this.playAudio(gameAssets.btn_select))})),t.addEventListener("mouseout",(()=>{i=!1}))}))}popUpMessage(e,t=3500){gameData.isClickable=!1;const i=document.getElementById("popUpMessage"),s=document.querySelector(".popupText");this.playAudio(gameAssets.deny),i.style.top="10%",s.children[0].textContent=e,setTimeout((()=>{i.style.top="-23%",setTimeout((()=>s.children[0].textContent=""),1e3),gameData.isClickable=!0}),t)}buildBg(){const e=this.createNewElement("div","container bg-gifs"),t=this.getImage("clouds_gif1");t.setAttribute("src","./../Assets/imgs/general/clouds_gif.gif"),t.setAttribute("alt","nuvens"),t.setAttribute("class","bg-gifs-clouds bg-c1");const i=this.getImage("clouds_gif2");i.setAttribute("src","./../Assets/imgs/general/clouds_gif.gif"),i.setAttribute("alt","nuvens"),i.setAttribute("class","bg-gifs-clouds bg-c2");const s=this.getImage("sun_gif");s.setAttribute("src","./../Assets/imgs/general/sun_gif.gif"),s.setAttribute("alt","sol"),s.setAttribute("class","bg-gifs-sun");const n=this.getImage("home_gif");n.setAttribute("src","./../Assets/imgs/general/home_gif.gif"),n.setAttribute("alt","home"),n.setAttribute("class","bg-gifs-home");const a=this.createNewElement("button","btn bg-homeBtn","homeBtn");a.addEventListener("click",(()=>{if(!gameData.isClickable)return;const e=document.querySelector("[vw-access-button]");!("Words"===gameData.mainScene||"Explore"===gameData.mainScene)||e.classList.contains("active")?(this.stopCurrentAudio(),this.resetContainerToNewScene("hm"),gameData.mainScene="Game",this.start()):this.popUpMessage('aperte o "X" vermelho para fechar a aplicação',2e3)})),a.addEventListener("mouseenter",(()=>{this.playAudio(gameAssets.btn_select)})),a.appendChild(n),e.appendChild(t),e.appendChild(i),e.appendChild(s),e.appendChild(a),document.getElementById("game_Container").appendChild(e)}createNewElement(e,t=void 0,i=void 0,s=void 0){const n=document.createElement(e);if(t){let e=t.split(" ");for(let t=0;t<e.length;t++)n.classList.add(e[t])}return i&&n.setAttribute("id",i),s&&n.setAttribute("src",s),n}}export{App};