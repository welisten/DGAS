import{gameData}from"../../Constants/gameData.js";import{colors}from"../../Constants/Colors.js";import{generalImgDtArr}from"../../Constants/ImagesData.js";import{Letter}from"../../Class/Letter.js";import{Sign}from"../../Class/Sign.js";class Alphabet{constructor(e){this.game=e,this.element=document.querySelector("#game_Container"),this.game.resetContainerToNewScene("lt"),document.title="Aprendendo o alfabeto",gameData.mainScene="Alphabet",this.lettersArr=[],this.signsArr=[],this.currentIndex=0,this.filter="todos",this.vogalsCharCode=[65,69,73,79,85],this.provisorySetContainer(),this.start()}provisorySetContainer(){let e,t,s;this.element.classList.remove("inactive"),e=window.innerWidth>2e3?.4*window.innerWidth:window.innerWidth>1500?.65*window.innerWidth:.55*window.innerWidth,t=Math.floor(e),s=.7*window.innerHeight,this.element.style.width=`${t}px`,this.element.style.height=`${s}px`}start(){this.game.playAudio(gameAssets.nature_ambience,1,!0),this.buildContainer(),this.setContainerElements()}buildContainer(){this.generateLetterCards(),this.generateSignCards(),this.game.buildBg();const e=this.game.createNewElement("div","lt-header container"),t=this.game.createNewElement("form","lt-hd-search btn"),s=this.game.createNewElement("input","lt-hd-searchBar");s.setAttribute("type","text"),s.setAttribute("placeholder","digite uma letra");const r=this.game.createNewElement("button","lt-hd-searchBtn");r.setAttribute("type","submit"),r.setAttribute("id","searchBtn");const n=this.game.createNewElement("i","fa-solid fa-magnifying-glass");r.appendChild(n),t.appendChild(s),t.appendChild(r);const a=this.game.createNewElement("div","lt-hd-nav container"),i=this.game.createNewElement("div","hd-nav-filters container"),l=this.game.createNewElement("div","ft-btn-container btn"),o=this.game.createNewElement("div","ft-btn-container btn"),h=this.game.createNewElement("div","ft-btn-container btn"),c=this.game.createNewElement("input","ft-btn-rd","todos");c.setAttribute("type","radio"),c.setAttribute("name","group"),c.setAttribute("value","todos"),c.setAttribute("checked","");const d=this.game.createNewElement("input","ft-btn-rd","vogais");d.setAttribute("type","radio"),d.setAttribute("name","group"),d.setAttribute("value","vogais");const g=this.game.createNewElement("input","ft-btn-rd","consoates");g.setAttribute("type","radio"),g.setAttribute("name","group"),g.setAttribute("value","consoantes");const m=this.game.createNewElement("label","filterBtn");m.setAttribute("for",""),m.innerHTML="todos";const u=this.game.createNewElement("label","filterBtn");u.setAttribute("for",""),u.innerHTML="vogais";const p=this.game.createNewElement("label","filterBtn");p.setAttribute("for",""),p.innerHTML="consoantes",l.append(c,m),o.append(d,u),h.append(g,p),i.append(l,o,h);const b=this.getImage("char2");b.setAttribute("src","./../Assets/imgs/general/char2.png"),b.setAttribute("alt","menina"),b.setAttribute("class","hd-nav-char2");let A=[];for(let e=0;e<4;e++)A[e]=this.getImage(`grass${e+1}`),A[e].setAttribute("src","./../Assets/imgs/general/grass.png"),A[e].setAttribute("alt","grama"),A[e].setAttribute("class","hd-nav-grass grass");let[w,f,C,v]=A;a.append(i,b),a.append(w,f,C,v),e.append(t,a);const E=this.game.createNewElement("div","lt-main"),y=this.game.createNewElement("div","lt-mn-container container"),N=this.game.createNewElement("div","lt-mn-letterCard lt-card"),L=this.lettersArr[0].element;L.setAttribute("alt",this.lettersArr[this.currentIndex].alt),L.setAttribute("class","lt-letter");const S=this.game.createNewElement("i","fa-solid fa-equals"),x=this.game.createNewElement("div","lt-mn-signCard lt-card"),I=this.signsArr[this.currentIndex].element;I.setAttribute("alt",this.signsArr[this.currentIndex].alt),I.setAttribute("class","lt-sign"),N.appendChild(L),x.appendChild(I),y.append(N,S,x),E.appendChild(y);const k=this.game.createNewElement("div","lt-footer"),B=this.game.createNewElement("div","lt-ft-btns container"),M=this.game.createNewElement("button","prevBtn ft-btn btn","prevBtn"),q=this.game.createNewElement("button","nextBtn ft-btn btn","nextBtn"),T=this.game.createNewElement("button","playBtn btn","playBtn"),D=this.game.createNewElement("i","fa-solid fa-left-long"),_=this.game.createNewElement("i","fa-solid fa-right-long"),H=this.game.createNewElement("a");H.setAttribute("href","https://www.youtube.com/watch?v=EZxkymw426U&t=33s"),H.setAttribute("target","_blank");const j=this.game.createNewElement("i","fa-brands fa-youtube");H.appendChild(j),M.appendChild(D),q.appendChild(_),T.appendChild(H),B.append(M,q,T),k.appendChild(B),this.element.append(e,E,k)}setContainerElements(){const e=document.querySelector("#prevBtn"),t=document.querySelector("#nextBtn"),s=document.querySelector(".lt-hd-searchBar"),r=document.querySelector("#searchBtn");document.querySelectorAll(".ft-btn-rd").forEach((e=>{e.addEventListener("click",(()=>{a(e.value),this.game.playAudio(gameAssets.btn_select)}))})),e.addEventListener("click",(()=>i())),t.addEventListener("click",(()=>l())),document.addEventListener("keydown",(e=>{if("Alphabet"===gameData.mainScene)switch(e.key){case"ArrowLeft":i();break;case"ArrowRight":l();break;default:return}})),r.addEventListener("click",(e=>{e.preventDefault(),s.value?n(s.value):this.game.popUpMessage("Você precisa digitar uma LETRA !"),this.game.playAudio(gameAssets.btn_select),s.value=""}));const n=e=>{if(!e)return void this.game.popUpMessage("Você precisa digitar uma LETRA !");document.querySelector(".ft-btn-rd#todos").click(),this.generateLetterCards(),this.generateSignCards();let t,s=e[0].toLowerCase().charCodeAt(0);s<97||s>122?this.game.popUpMessage("Digite uma LETRA válida !"):(t=s-97,this.currentIndex=t,this.updateMain())},a=e=>{switch(this.filter=e,this.currentIndex=0,this.filter){case"todos":this.filter="todos";break;case"vogais":this.filter="vogais";break;case"consoantes":this.filter="consoantes"}this.generateLetterCards(),this.generateSignCards(),this.updateMain()},i=()=>{this.currentIndex>0&&(this.currentIndex--,this.updateMain(),this.game.playAudio(gameAssets.btn_select))},l=()=>{this.currentIndex<this.lettersArr.length-1&&(this.currentIndex++,this.updateMain(),this.game.playAudio(gameAssets.btn_select))}}generateLetterCards(){try{switch(this.filter){case"todos":this.lettersArr.length=0;for(let e=65;e<=90;e++)this.lettersArr.push(new Letter(e));break;case"vogais":this.lettersArr.length=0;for(let e=0;e<this.vogalsCharCode.length;e++)this.lettersArr.push(new Letter(this.vogalsCharCode[e]));break;case"consoantes":this.lettersArr.length=0;for(let e=65;e<=90;e++)this.vogalsCharCode.includes(e)||this.lettersArr.push(new Letter(e))}}catch(e){console.log(e.message)}}updateMain(){const e=document.querySelector(".lt-mn-letterCard"),t=document.querySelector(".lt-mn-signCard");e.innerHTML="",t.innerHTML="";const s=this.lettersArr[this.currentIndex].element,r=this.signsArr[this.currentIndex].element;s.setAttribute("alt",this.lettersArr[this.currentIndex].alt),s.setAttribute("class","lt-letter"),r.setAttribute("alt",this.signsArr[this.currentIndex].alt),r.setAttribute("class","lt-sign"),e.appendChild(s),t.appendChild(r)}generateSignCards(){try{switch(this.filter){case"todos":this.signsArr.length=0;for(let e=97;e<=122;e++)this.signsArr.push(new Sign(e));break;case"vogais":this.signsArr.length=0;for(let e=0;e<this.vogalsCharCode.length;e++)this.signsArr.push(new Sign(this.vogalsCharCode[e]+32));break;case"consoantes":this.signsArr.length=0;for(let e=97;e<=122;e++)this.vogalsCharCode.includes(e-32)||this.signsArr.push(new Sign(e))}}catch(e){console.log(e.message)}}getImage(e){return gameAssets[e]}}export{Alphabet};