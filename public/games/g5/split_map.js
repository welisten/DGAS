const fs=require("fs-extra");async function splitMap(t,s,e,i){const a=await fs.readFile(t,"utf-8"),n=JSON.parse(a),o=n.width,l=n.height;await fs.ensureDir(s);for(let t=0;t<o;t+=e)for(let a=0;a<l;a+=i){const c=JSON.parse(JSON.stringify(n));c.width=e,c.height=i,c.layers.forEach((s=>{if(s.data){const n=[];for(let c=0;c<i;c++)for(let i=0;i<e;i++){const e=t+i,r=a+c;if(e<o&&r<l){const t=r*o+e;n.push(s.data[t])}else n.push(0)}s.data=n}}));const r=`${s}/chunk_${t/e}_${a/i}.json`;await fs.writeFile(r,JSON.stringify(c)),console.log(`Chunk Saved: ${r}`)}}const inputFile="dist/public/assets/map/fase_1_map_full.json",outputDir="dist/public/assets/map/chunk/level1",chunkWidth=43,chunkHeight=63;splitMap(inputFile,outputDir,43,63).then((()=>console.log("Map splitting completed"))).catch((t=>console.error(t)));