import{App}from"./Game.js";import{gameData}from"../../Constants/gameData.js";import{generalImageDataArray}from"../../Constants/ImagesData.js";import{audioDataArray}from"../../Constants/songsData.js";import{general_colors,palett}from"../../../../constants/colors.js";import{plataformData}from"../../../../constants/plataformData.js";let store,gameCanvas;class Preloader{constructor(){this.intro=null,this.phaserGame=null,this.assetsControls={},this.setPreloader(),document.title="PÃ¡gina de carregamento",plataformData.isDarkMode||document.documentElement.setProperti("--bg--",general_colors.bg_light)}setPreloader(){const e=`${window.screen.width>2e3?.4*window.screen.width:window.screen.width>1500?.65*window.screen.width:.6*window.screen.width}px`,a=.613*window.screen.height,t=document.querySelector("#loading");t.style.width=e,t.style.height=a;const o={type:Phaser.AUTO,width:e,height:a,parent:t,transparent:!0,scene:{preload:this.preload}};this.phaserGame=new Phaser.Game(o)}preload(){window.gameAssets={},store=window.gameAssets,gameCanvas=this.sys.game.canvas,setCanvasStyle(gameCanvas);const e=document.querySelector("#loading");e.classList.add("active");const a=e=>this.textures.get(e).getSourceImage(),t=e=>this.cache.audio.get(e);function o(e,a,t){e[a]=t}this.load.on("filecomplete",(e=>{console.log(`O arquivo "${e}" foi carregado`)})),this.load.on("complete",(()=>{let r,s;audioDataArray.forEach((e=>o(store,e.name,t(e.name))));for(let e of generalImageDataArray)o(store,e.name,a(e.name));r=document.querySelector(".textToReader"),s=document.querySelector("#p-carregando"),r.textContent="carregamento concluido",s.setAttribute("aria-buzy",!1),this.time.delayedCall(1e3,(()=>{e.classList.remove("active"),e.remove(),gameCanvas.remove(),gameData.mainScene="Game",gameData.app=new App}))}));for(let e of generalImageDataArray)this.load.image(e.name,e.src);audioDataArray.forEach((e=>{this.load.audio(e.name,e.src)}))}}function setCanvasStyle(e){e.id="jogo4_canvas",e.style.border=`10px solid ${palett.dark_4}`,e.style.borderRadius="20px"}export{Preloader};